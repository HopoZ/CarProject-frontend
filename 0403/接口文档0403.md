# 版本信息

| 版本 | 变动                            | 修改时间  |
| ---- | ------------------------------- | --------- |
| v1.0 | 基本接口需求                    | 2024.3.15 |
| v2.0 | 重构web端接口，新增小程序端接口 | 2024.3.25 |
| v2.1 | 增加web端删除接口               | 2024.4.3  |

# 基本信息

- 项目部署URL：82.156.65.122
- ApiPost测试：https://console-docs.apipost.cn/preview/d2d5fa8730c0a7c9/3ea33a6d18601bf0

# web端

## 1. 详细数据查询接口 

- url：/web/getDetailedData
- 实现功能：前端向后端传车牌号，后端返回详细信息
- 请求方式：GET
- 请求参数：

|   参数    |  类型  |  说明  |
| :-------: | :----: | :----: |
| carNumber | String | 车牌号 |

- 返回值：

  返回一个 Map, 包含如下信息：

  |       值        |  类型  |               说明                |
  | :-------------: | :----: | :-------------------------------: |
  |    carNumber    | String |              车牌号               |
  |     isTired     | String | 是否疲劳，疲劳：true，否则：false |
  |     isDrunk     | String | 是否酒驾，酒驾：true，否则：false |
  | drunkDrivingPro | String |             酒驾概率              |
  |   alcoholConc   | Float  |          车内酒精浓度比           |
  |   temperature   | Float  |               温度                |
  |    latitude     | Float  |               维度                |
  |    longitude    | Float  |               经度                |

  ![QQ截图20240325132140](.\img\QQ截图20240325132140.png)

## 2. 注册车辆汇总接口 

- url：/web/carDataList
- 实现功能：返回车辆汇总信息
- 请求方式：GET
- 请求参数：void

- 返回值：

  返回一个 List<>, 包含多个carData对象，每个carData包含如下信息：

  |    值     |  类型  |               说明                |
  | :-------: | :----: | :-------------------------------: |
  | carNumber | String |              车牌号               |
  |  isTired  | String | 是否疲劳，疲劳：true，否则：false |
  |  isDrunk  | String | 是否酒驾，酒驾：true，否则：false |
  

![QQ截图20240325132308]( .\img\QQ截图20240325132308.png)

## 3. web端注册车辆

- url：/web/registerCar

- 实现功能：注册车辆

- 请求方式：post

- 请求参数：json格式

  |    值     |  类型  |  说明  |
  | :-------: | :----: | :----: |
  | carNumber | String | 车牌号 |

- 返回值：

  - 成功示例：

    ![QQ截图20240325133244](.\img\QQ截图20240325133244.png)

  - 失败示例：

  ![QQ截图20240325133251](.\img\QQ截图20240325133251.png)
  
  
  
  ##  4. web端删除车辆
  
  - url：/web/delete
  
  - 实现功能：删除注册车辆
  
  - 请求方式：get
  
  - 请求参数：json格式
  
    |    值     |  类型  |  说明  |
    | :-------: | :----: | :----: |
    | carNumber | String | 车牌号 |
  
  - 返回值：
  
    - 成功示例：
  
      ![QQ截图20240403162602](.\img\QQ截图20240403162602.png)
  
    - 失败示例：
  

​			![QQ截图20240403162214](.\img\QQ截图20240403162214.png)



# 小程序

## 0.测试可用user

![QQ截图20240325141659](.\img\QQ截图20240325141659.png)

## 1.登录接口

- url：/user/login

- 实现功能：登录

- 请求方式：post

- 请求参数：User 对象，结构如下：

  |    值     |  类型  |  说明  |
  | :-------: | :----: | :----: |
  | carNumber | String | 车牌号 |
  | password  | String |  密码  |

- 返回值：

  + 成功：

    ![QQ截图20240325135701](.\img\QQ截图20240325135701.png)

  +  失败：

    ![QQ截图20240325135907](.\img\QQ截图20240325135907.png)

## 2.注册接口

- url：/user/register

- 实现功能：注册

- 请求方式：post

- 请求参数：User 对象，结构如下：

  |    值     |  类型  |  说明  |
  | :-------: | :----: | :----: |
  | carNumber | String | 车牌号 |
  | password  | String |  密码  |

- 返回值：

  - 成功：

    ![QQ截图20240325140329](.\img\QQ截图20240325140329.png)

  - 失败：

    ![QQ截图20240325140743](.\img\QQ截图20240325140743.png)

## 3.小程序车辆详细信息查询

- url：/WCMP/getDetailedData
- 实现功能：前端向后端传车牌号，后端返回详细信息
- 请求方式：GET
- 请求参数：
  - **使用token验证**


|   参数    |  类型  |  说明  |
| :-------: | :----: | :----: |
| carNumber | String | 车牌号 |

- 返回值：

  - token错误

    ![QQ截图20240325133859](.\img\QQ截图20240325133859.png)

  +  成功

  返回一个 Map, 包含如下信息：

  |       值        |  类型  |               说明                |
  | :-------------: | :----: | :-------------------------------: |
  |    carNumber    | String |              车牌号               |
  |     isTired     | String | 是否疲劳，疲劳：true，否则：false |
  |     isDrunk     | String | 是否酒驾，酒驾：true，否则：false |
  | drunkDrivingPro | String |             酒驾概率              |
  |   alcoholConc   | Float  |          车内酒精浓度比           |
  |   temperature   | Float  |               温度                |
  |    latitude     | Float  |               维度                |
  |    longitude    | Float  |               经度                |

​	![QQ截图20240325141431](.\img\QQ截图20240325141431.png)
